<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Visor - OREKAN</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans&display=swap" rel="stylesheet">

  <style>
    body, html {
      margin: 0;
      padding: 0;
      height: 100%;
      font-family: sans-serif;
    }
    #Mapa1 {
      width: 100%;
      height: calc(100% - 60px);
    }
    #logo {
      height: 60px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: #f4f4f4;
      border-top: 1px solid #ccc;
    }
    #logo img {
      height: 40px;
    }
    #meteo-box {
      position: fixed;
      bottom: 20px;
      right: 20px;
      width: 280px;
      background-color: #fdfdfd;
      border: 1px solid #ccc;
      padding: 15px;
      font-family: sans-serif;
      box-shadow: 0 0 10px rgba(0,0,0,0.2);
      z-index: 1000;
      font-family: 'IBM Plex Sans', sans-serif;
    }

    /* Estado plegado: sin borde ni sombra */
    #menu-proyectos {
        position: absolute;
        top: 50%;
        right: 0;
        transform: translateY(-50%);
        z-index: 1000;
        width: 30px;
        background: transparent; /* fondo invisible */
        transition: width 0.3s ease, background 0.3s ease, box-shadow 0.3s ease, border-left 0.3s ease;
        border-left: none;
        box-shadow: none;
        overflow: visible; /* permite que el tab sobresalga sin ser recortado */
        font-family: 'IBM Plex Sans', sans-serif;
    }

    /* Estado desplegado al hacer hover */
    #menu-proyectos:hover {
        width: 250px;
        background: white;
        border-left: 2px solid #ccc;
        box-shadow: -2px 0 5px rgba(0,0,0,0.2);
    }


    /* Oculta el contenido por defecto */
    #menu-content {
        opacity: 0;
        pointer-events: none;
        transition: opacity 0.3s ease;
    }

    /* Muestra el contenido al hacer hover */
    #menu-proyectos:hover #menu-content {
        opacity: 1;
        pointer-events: auto;
    }

    #menu-tab {
        position: absolute;
        top: 50%;
        left: 100%; /* coloca el tab justo al borde derecho del men√∫ */
        transform: rotate(-90deg) translateY(-50%);
        transform-origin: left center;
        background: #f15d5d;
        border: 1px solid #a19e9e;
        padding: 5px 10px;
        font-size: 14px;
        font-weight: bold;
        cursor: pointer;
        white-space: nowrap;
        box-shadow: 0 0 5px rgba(255, 255, 255, 0.974);
        z-index: 999; /* asegura que est√© por encima del men√∫ */
        border-radius: 2px;     /* Bordes redondeados */
        color: rgba(255, 255, 255, 0.977);           /* Fuente en color blanco */
        pointer-events: auto;
        font-family: 'IBM Plex Sans', sans-serif;
    }


    #menu-content {
        padding: 20px;
        font-size: 14px;
    }

    #menu-content h4 {
        margin-top: 0;
    }

    #menu-content ul {
        list-style: none;
        padding-left: 0;
        margin: 0;
    }

    #menu-content li {
        margin-bottom: 10px;
    }

    #menu-content a {
        text-decoration: none;
        color: #333;
    }

    #menu-content a:hover {
        text-decoration: underline;
    }








  </style>
</head>
<body>
  <div id="Mapa1"></div>
  <div id="logo">
    <img src="data:image/png;base64,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
    " alt="Logo Orekan" />
  </div>
  <div id="meteo-box" style="
  position: absolute;
  bottom: 10px;
  right: 10px;
  background: white;
  padding: 10px;
  z-index: 1000;
  box-shadow: 0 0 5px rgba(0,0,0,0.3);
  max-width: 300px;
  ">
  <div style="display: flex; justify-content: space-between; align-items: center;">
      <h3 style="margin: 10px;">üå§Ô∏è Eguraldi informazioa</h3>
      <button id="toggle-meteo" style="font-size: 16px;">‚ûñ</button>
  </div>
  <div id="meteo-content" style="margin-top: 10px;"></div>
  </div>
  

  <div id="menu-proyectos">
    <div id="menu-tab">Proiektu Europearrak</div>
    <div id="menu-content">

      <ul>
        <li><a href="#" class="proyecto-link">RED.BIO ‚Äì Biodiversidad</a></li>
        <li><a href="#" class="proyecto-link">FLORAPYR 3D ‚Äì Biodiversidad</a></li>
        <li><a href="#" class="proyecto-link">SANA SILVA ‚Äì Gesti√≥n Forestal</a></li>
        <li><a href="#" class="proyecto-link">La Rhun-E ‚Äì Gesti√≥n Forestal</a></li>
        <li><a href="#" class="proyecto-link">COOPTREE ‚Äì Gesti√≥n Forestal</a></li>
        <li><a href="#" class="proyecto-link">LIFE NADAPTA ‚Äì Agua</a></li>
      </ul>
    </div>
  </div>




  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script src="https://unpkg.com/leaflet-ajax/dist/leaflet.ajax.min.js"></script>
  <script src="https://unpkg.com/leaflet-tilelayer-wmts@latest/leaflet-tilelayer-wmts.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/proj4js/2.8.0/proj4.js"></script>

  <script>
    const irulegiCoords = [42.7795, -1.5134];



    // Configuraci√≥n para EPSG:25830 (UTM 30N) - La que funciona

    const proj25830 = '+proj=utm +zone=30 +ellps=GRS80 +units=m +no_defs';


    const navarraWMS = L.tileLayer.wms("https://idena.navarra.es/ogc/wms", {
      layers: "ortofoto_maxima_actualidad",
      format: "image/jpeg",
      transparent: false,
      attribution: "¬© Gobierno de Navarra - IDENA",
      version: "1.3.0",
      detectRetina: false,
      crossOrigin: 'anonymous' 
    });

    const osm = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '&copy; OpenStreetMap contributors',
        maxZoom: 19
    });

    const esri = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {
        
        maxZoom: 19
    });

    const opentopo = L.tileLayer('https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png', {
        attribution: 'Map data: &copy; OpenStreetMap contributors, SRTM | Map style: &copy; OpenTopoMap',
        maxZoom: 17
    });

    const relieveWMS = L.tileLayer.wms("https://idena.navarra.es/ogc/wms", {
      layers: "mapa_relieve_color",
      format: "image/png",
      transparent: false,
      attribution: "¬© Gobierno de Navarra - IDENA",
      version: "1.3.0"
    });



    // Crear el mapa en 
    const map = L.map('Mapa1', {
        center: [42.8184, -1.6446],
        zoom: 9,
        layers: [esri] // Esta deber√≠a cargar ahora
    });

    const baseMaps = {
      "ESRI Ortofoto": esri,
      "OpenStreetMap": osm,
      "Ortofoto Navarra": navarraWMS,
      "Mapa de relieve (Navarra)": relieveWMS,
      "OpenTopoMap (Mundial)": opentopo
    };



    L.control.layers(baseMaps).addTo(map);

    const wfsUrl = "https://idena.navarra.es/ogc/wfs?service=WFS&version=2.0.0&request=GetFeature&typeName=IDENA:REFERE_Lin_Navarra&outputFormat=application/json&srsName=EPSG:4326" + Date.now();

    const refereLayer = new L.GeoJSON.AJAX(wfsUrl, {
      onEachFeature: function (feature, layer) {
        const props = feature.properties;
        layer.bindPopup(`<b>REFERE</b><br>ID: ${props.ID || 'Sin ID'}`);
      }
    }).addTo(map);

    refereLayer.on("data:loaded", () => {
      console.log("Capa REFERE cargada");
    });






    const geojsonLayer = new L.GeoJSON.AJAX("Repoblaciones_4326.geojson", {
    onEachFeature: function (feature, layer) {
        const props = feature.properties;
        layer.bindPopup(`<b>${props.PROYECTO}</b><br>${props.MUNICIPIO} (${props.FECHAEJEC})`);
    }
    }).addTo(map);

    geojsonLayer.on("data:loaded", () => {
    map.fitBounds(geojsonLayer.getBounds());
    });




    fetch("Repoblaciones_4326.geojson")

    .then(response => response.json())
    .then(data => {
        const municipiosSet = new Set();
        const municipioCoords = {};

        L.geoJSON(data, {
        onEachFeature: function (feature, layer) {
            const props = feature.properties;
            const centroX = props["CENTRO X"];
            const centroY = props["CENTRO Y"];
            const municipio = props.MUNICIPIO;

            const [lon, lat] = proj4(proj25830, 'WGS84', [centroX, centroY]);

            // Guardar municipio y coordenadas
            municipiosSet.add(municipio);
            municipioCoords[municipio] = [lat, lon];

            // Crear marcador
            const marker = L.marker([lat, lon]).addTo(map);
            marker.bindPopup(`<b>${props.PROYECTO}</b><br>${municipio}`);

            marker.on("click", () => {
            const earthUrl = `https://earth.google.com/web/@${lat},${lon},1000a,75y,0h,45t,0r`;
            window.open(earthUrl, "earthWindow", "width=800,height=600");

            fetch(`https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current=temperature_2m,wind_speed_10m,precipitation&hourly=temperature_2m,wind_speed_10m,precipitation&timezone=auto`)
                .then(response => response.json())
                .then(data => {
                const weather = {
                    temperature: data.current.temperature_2m,
                    windspeed: data.current.wind_speed_10m,
                    precipitation: data.current.precipitation,
                    time: data.current.time
                };

                const forecast = [];
                for (let i = 0; i < 6; i++) {
                    forecast.push({
                    time: data.hourly.time[i].slice(11, 16),
                    temperature: data.hourly.temperature_2m[i],
                    windspeed: data.hourly.wind_speed_10m[i],
                    precipitation: data.hourly.precipitation[i]
                    });
                }

                const forecastHTML = forecast.map(hour => `
                    <li>
                    <strong>${hour.time}</strong> ‚Äì 
                    ${hour.temperature}¬∞C, 
                    ${hour.windspeed} km/h, 
                    ${hour.precipitation} mm
                    </li>
                `).join('');

                document.getElementById("meteo-content").innerHTML = `
                    <h4>üå¶Ô∏è Eguraldi informazioa ‚Äì ${municipio}</h4>
                    <p><strong>Temperatura:</strong> ${weather.temperature} ¬∞C</p>
                    <p><strong>Viento:</strong> ${weather.windspeed} km/h</p>
                    <p><strong>Precipitaci√≥n:</strong> ${weather.precipitation} mm</p>
                    <p><em>Actualizado: ${weather.time.replace('T', ' ')}</em></p>
                    <h4>üîÆ Pr√≥ximas 6 horas</h4>
                    <ul>${forecastHTML}</ul>
                `;
                });

            document.getElementById("info-content").innerHTML = `
                <h4>${props.PROYECTO}</h4>
                <p><strong>Municipio:</strong> ${municipio}</p>
            `;
            });
        }
        }).addTo(map);

        // Paso 2: poblar el selector
        const selector = document.getElementById("municipio-selector");
        [...municipiosSet].sort().forEach(muni => {
        const option = document.createElement("option");
        option.value = muni;
        option.textContent = muni;
        selector.appendChild(option);
        });

        // Paso 3: evento de zoom al seleccionar
        selector.addEventListener("change", function () {
        const municipio = this.value;
        if (municipio && municipioCoords[municipio]) {
            const [lat, lon] = municipioCoords[municipio];
            map.setView([lat, lon], 15);
        }
        });
    });




    // A√±adir marcador
    const marker = L.marker(irulegiCoords).addTo(map);
    marker.bindPopup("<b>Irulegi</b><br>Yacimiento arqueol√≥gico");

    // Evento click del marcador
    marker.on("click", () => {
      const earthUrl = "https://earth.google.com/web/@42.7791,-1.5134,1000a,75y,0h,45t,0r";
      window.open(earthUrl, "earthWindow", "width=800,height=600");

      // Obtener datos meteorol√≥gicos
      fetch("https://api.open-meteo.com/v1/forecast?latitude=42.7795&longitude=-1.5134&current=temperature_2m,wind_speed_10m,precipitation&hourly=temperature_2m,wind_speed_10m,precipitation&timezone=auto")
        .then(response => response.json())
        .then(data => {
          const weather = {
            temperature: data.current.temperature_2m,
            windspeed: data.current.wind_speed_10m,
            precipitation: data.current.precipitation,
            time: data.current.time
          };

          const forecast = [];
          for (let i = 0; i < 6; i++) {
            forecast.push({
              time: data.hourly.time[i].slice(11, 16),
              temperature: data.hourly.temperature_2m[i],
              windspeed: data.hourly.wind_speed_10m[i],
              precipitation: data.hourly.precipitation[i]
            });
          }

          const forecastHTML = forecast.map(hour => `
            <li>
              <strong>${hour.time}</strong> ‚Äì 
              ${hour.temperature}¬∞C, 
              ${hour.windspeed} km/h, 
              ${hour.precipitation} mm
            </li>
          `).join('');

          document.getElementById("meteo-content").innerHTML = `
            <p><strong>Temperatura/Tenperatura:</strong> ${weather.temperature} ¬∞C</p>
            <p><strong>Viento/Haizea:</strong> ${weather.windspeed} km/h</p>
            <p><strong>Precipitaci√≥n/Euria:</strong> ${weather.precipitation} mm</p>
            <p><em>Actualizado/Egunerotua: ${weather.time.replace('T', ' ')}</em></p>
            <h4>üîÆ Pr√≥ximas 6 horas/Hurrengo 6 orduak</h4>
            <ul>${forecastHTML}</ul>
          `;
        })
        .catch(error => {
          console.error('Error fetching weather data:', error);
          document.getElementById("meteo-content").innerHTML = `
            <p>Error cargando datos meteorol√≥gicos</p>
          `;
        });



    });
    document.getElementById("toggle-meteo").addEventListener("click", function () {
    const content = document.getElementById("meteo-content");
    const button = this;

    if (content.style.display === "none") {
        content.style.display = "block";
        button.textContent = "‚ûñ";
    } else {
        content.style.display = "none";
        button.textContent = "‚ûï";
    }
    });





    document.querySelectorAll(".proyecto-link").forEach(link => {
    link.addEventListener("click", function (e) {
        e.preventDefault();
        location.reload(); // recarga la p√°gina completa
    });
    });





  </script>

    <select id="municipio-selector" style="
    position: absolute;
    top: 100px;
    left: 10px;
    z-index: 1000;
    padding: 5px;
    font-size: 14px;
    max-width: 30ch;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    font-family: 'IBM Plex Sans', sans-serif;
    background-color: #fdfdfd;
    border-radius: 4px;     /* Bordes redondeados */
    ">
    <option value="">üîç Hautatu udalerria</option>
    </select>


</body>

</html>


